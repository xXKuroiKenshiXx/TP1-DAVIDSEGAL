"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2303],{2303:(M,g,i)=>{i.r(g),i.d(g,{RegisterPage:()=>C});var c=i(467),d=i(177),r=i(4341),u=i(2780),e=i(3953),p=i(5260),f=i(5375),h=i(2739),E=i(7540);function P(a,_){1&a&&(e.j41(0,"ion-note",9),e.EFF(1," El nombre de usuario es obligatorio y debe tener al menos 4 caracteres. "),e.k0s())}function F(a,_){1&a&&(e.j41(0,"ion-note",9),e.EFF(1," Por favor, introduce un email v\xe1lido. "),e.k0s())}function v(a,_){1&a&&(e.j41(0,"ion-note",9),e.EFF(1," La contrase\xf1a es obligatoria y debe tener al menos 4 caracteres. "),e.k0s())}let C=(()=>{class a{constructor(n,o,t,l,s){this.fb=n,this.router=o,this.authService=t,this.usersService=l,this.alertCtrl=s,this.registerForm=this.fb.group({username:["",[r.k0.required,r.k0.minLength(4),r.k0.maxLength(32)]],email:["",[r.k0.required,r.k0.email,r.k0.maxLength(255)]],password:["",[r.k0.required,r.k0.minLength(4),r.k0.maxLength(255)]],confirmPassword:["",[r.k0.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator(n){const o=n.get("password")?.value,t=n.get("confirmPassword")?.value;return o===t?null:{mismatch:!0}}showAlert(n,o){var t=this;return(0,c.A)(function*(){yield(yield t.alertCtrl.create({header:n,message:o,buttons:["OK"]})).present()})()}onRegister(){var n=this;return(0,c.A)(function*(){if(n.registerForm.invalid)return void n.registerForm.markAllAsTouched();const{username:o,email:t,password:l}=n.registerForm.value;try{if(yield n.usersService.checkExistingEmail(t).toPromise())return void(yield n.showAlert("Error","Ya existe una cuenta con el email ingresado."))}catch{}try{yield n.authService.register(o,t,l).toPromise(),yield n.showAlert("Registro exitoso",`Usuario registrado: ${o} (${t})`),n.router.navigate(["/login"])}catch(s){console.error(s),yield n.showAlert("Error","No se puede registrar el usuario. Revise la consola para m\xe1s informaci\xf3n.")}})()}static#e=this.\u0275fac=function(o){return new(o||a)(e.rXU(r.ok),e.rXU(p.Ix),e.rXU(f.u),e.rXU(h.g),e.rXU(E.hG))};static#r=this.\u0275cmp=e.VBU({type:a,selectors:[["app-register"]],standalone:!0,features:[e.aNF],decls:27,vars:5,consts:[[1,"ion-padding"],[1,"form-container",3,"ngSubmit","formGroup"],["position","floating"],["type","text","formControlName","username","required",""],["color","danger",4,"ngIf"],["type","email","formControlName","email","required",""],["type","password","formControlName","password","required",""],["type","password","formControlName","confirmPassword","required",""],["expand","block","type","submit",3,"disabled"],["color","danger"]],template:function(o,t){if(1&o&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Registrarse"),e.k0s()()(),e.j41(4,"ion-content",0)(5,"form",1),e.bIt("ngSubmit",function(){return t.onRegister()}),e.j41(6,"ion-item")(7,"ion-label",2),e.EFF(8,"Username"),e.k0s(),e.nrm(9,"ion-input",3),e.k0s(),e.DNE(10,P,2,0,"ion-note",4),e.j41(11,"ion-item")(12,"ion-label",2),e.EFF(13,"Email"),e.k0s(),e.nrm(14,"ion-input",5),e.k0s(),e.DNE(15,F,2,0,"ion-note",4),e.j41(16,"ion-item")(17,"ion-label",2),e.EFF(18,"Contrase\xf1a"),e.k0s(),e.nrm(19,"ion-input",6),e.k0s(),e.DNE(20,v,2,0,"ion-note",4),e.j41(21,"ion-item")(22,"ion-label",2),e.EFF(23,"Confirmar contrase\xf1a"),e.k0s(),e.nrm(24,"ion-input",7),e.k0s(),e.j41(25,"ion-button",8),e.EFF(26,"Registrarse"),e.k0s()()()),2&o){let l,s,m;e.R7$(5),e.Y8G("formGroup",t.registerForm),e.R7$(5),e.Y8G("ngIf",(null==(l=t.registerForm.get("username"))?null:l.invalid)&&(null==(l=t.registerForm.get("username"))?null:l.touched)),e.R7$(5),e.Y8G("ngIf",(null==(s=t.registerForm.get("email"))?null:s.invalid)&&(null==(s=t.registerForm.get("email"))?null:s.touched)),e.R7$(5),e.Y8G("ngIf",(null==(m=t.registerForm.get("password"))?null:m.invalid)&&(null==(m=t.registerForm.get("password"))?null:m.touched)),e.R7$(5),e.Y8G("disabled",t.registerForm.invalid)}},dependencies:[u.uz,u.he,u.JI,r.X1,r.qT,r.BC,r.cb,r.YS,r.j4,r.JD,u.W9,u.eU,u.BC,u.ai,d.MD,d.bT,r.YN,u.Jm,u.$w],styles:[".content-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px}.profile-image-container[_ngcontent-%COMP%]{text-align:center;cursor:pointer}.profile-image[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;transition:transform .3s ease;box-shadow:0 4px 8px #0003}.profile-image-container[_ngcontent-%COMP%]:hover   .profile-image[_ngcontent-%COMP%]{transform:scale(1.1)}.profile-image-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:10px}.form-container[_ngcontent-%COMP%]{width:90%;max-width:400px;padding:20px;background-color:#fff;box-shadow:0 4px 8px #0003;border-radius:8px;margin:3% auto 0}"]})}return a})()}}]);