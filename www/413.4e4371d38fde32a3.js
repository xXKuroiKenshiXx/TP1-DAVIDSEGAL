"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[413],{413:(p,u,r)=>{r.r(u),r.d(u,{LoginPage:()=>f});var g=r(467),_=r(177),o=r(4341),a=r(2780),c=r(5379),n=r(3953),m=r(5260),d=r(5375),h=r(7540);let f=(()=>{class s{constructor(t,i,e,l){this.fb=t,this.router=i,this.authService=e,this.alertCtrl=l,this.loginForm=this.fb.group({email:["",[o.k0.required,o.k0.email]],password:["",[o.k0.required]]})}onLogin(){var t=this;return(0,g.A)(function*(){if(t.loginForm.invalid)return t.loginForm.markAllAsTouched(),void t.showAlert("Error","Debe ingresar todos los campos");const i=t.loginForm.value;t.authService.login(i.email,i.password).subscribe({next:e=>{e&&(t.authService.setSession(e.token),t.authService.hasRole(c.$.ADMINISTRADOR)?t.router.navigateByUrl("tabs/home"):t.authService.hasRole(c.$.INVITADO)||t.authService.hasRole(c.$.USUARIO)?t.router.navigateByUrl("/tabs/home"):t.router.navigateByUrl("/"))},error:e=>{console.error("Error en autenticaci\xf3n:",e),t.showAlert("Error de autenticaci\xf3n","Error al autenticar. Verifique el usuario y la clave")}})})()}goToRegister(){this.router.navigate(["/tabs/redes"])}showAlert(t,i){var e=this;return(0,g.A)(function*(){yield(yield e.alertCtrl.create({header:t,message:i,buttons:["OK"]})).present()})()}static#n=this.\u0275fac=function(i){return new(i||s)(n.rXU(o.ok),n.rXU(m.Ix),n.rXU(d.u),n.rXU(h.hG))};static#t=this.\u0275cmp=n.VBU({type:s,selectors:[["app-login"]],standalone:!0,features:[n.aNF],decls:27,vars:2,consts:[["color","green"],[1,"ion-padding"],[1,"form-container"],[3,"ngSubmit","formGroup"],["position","floating"],["required","","type","email","formControlName","email"],["required","","type","password","formControlName","password"],["slot","end"],[1,"buttons-container"],["expand","block","type","submit",1,"login-button",3,"disabled"],[1,"register-container"],[1,"register-text"],["expand","block","fill","clear","color","primary",1,"register-button",3,"click"]],template:function(i,e){1&i&&(n.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),n.EFF(3,"Login"),n.k0s()()(),n.j41(4,"ion-content",1)(5,"div",2)(6,"form",3),n.bIt("ngSubmit",function(){return e.onLogin()}),n.j41(7,"ion-item")(8,"ion-label",4),n.EFF(9,"Correo Electr\xf3nico"),n.k0s(),n.nrm(10,"ion-input",5),n.k0s(),n.j41(11,"ion-item")(12,"ion-label",4),n.EFF(13,"Contrase\xf1a"),n.k0s(),n.j41(14,"ion-input",6),n.nrm(15,"ion-input-password-toggle",7),n.k0s()(),n.j41(16,"div",8)(17,"ion-button",9),n.EFF(18,"Iniciar Sesi\xf3n"),n.k0s(),n.j41(19,"div",10)(20,"p",11),n.EFF(21,"\xbfNo tienes una cuenta?"),n.k0s(),n.j41(22,"ion-button",12),n.bIt("click",function(){return e.goToRegister()}),n.EFF(23,"Reg\xedstrate"),n.k0s()()()()()(),n.j41(24,"ion-footer")(25,"p"),n.EFF(26,"\xa9 Derechos reservados 2024"),n.k0s()()),2&i&&(n.R7$(6),n.Y8G("formGroup",e.loginForm),n.R7$(11),n.Y8G("disabled",e.loginForm.invalid))},dependencies:[a.uz,a.he,a.Wv,o.X1,o.qT,o.BC,o.cb,o.YS,o.j4,o.JD,a.W9,a.eU,a.BC,a.ai,_.MD,o.YN,a.Jm,a.M0,a.$w],styles:["ion-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%}ion-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{width:90%;max-width:400px;padding:20px;background-color:#fff;box-shadow:0 4px 8px #0003;border-radius:8px;margin:5% auto 0}ion-content[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}ion-content[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:20px}ion-content[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   .register-button[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}ion-content[_ngcontent-%COMP%]   .register-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}ion-content[_ngcontent-%COMP%]   .register-text[_ngcontent-%COMP%]{font-size:14px;color:#666;margin-bottom:5px}ion-footer[_ngcontent-%COMP%]{text-align:center;padding:10px;font-size:12px;color:#666}"]})}return s})()}}]);